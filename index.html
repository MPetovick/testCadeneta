<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockMaster Pro - Gestión Predictiva de Stock</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Barra de navegación superior -->
    <nav class="top-nav">
        <div class="nav-left">
            <i class="fas fa-store-alt logo-icon"></i>
            <h1 class="logo">StockMaster Pro</h1>
        </div>
        <div class="nav-right">
            <div class="search-container">
                <input type="text" placeholder="Buscar producto..." id="global-search">
                <i class="fas fa-search"></i>
            </div>
            <div class="user-info">
                <span>Estanc Gracia</span>
                <i class="fas fa-user-circle"></i>
            </div>
        </div>
    </nav>

    <!-- Contenedor principal -->
    <div class="app-container">
        <!-- Barra lateral de navegación -->
        <div class="sidebar">
            <ul class="nav-menu">
                <li class="active" data-section="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </li>
                <li data-section="inventario">
                    <i class="fas fa-boxes"></i>
                    <span>Inventario</span>
                </li>
                <li data-section="movimientos">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Movimientos</span>
                </li>
                <li data-section="predicciones">
                    <i class="fas fa-chart-bar"></i>
                    <span>Predicciones</span>
                </li>
                <li data-section="pedidos">
                    <i class="fas fa-truck"></i>
                    <span>Pedidos</span>
                </li>
                <li data-section="config">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="system-status">
                    <div class="status-indicator active"></div>
                    <span>Sistema en línea</span>
                </div>
                <button class="logout-btn" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar sesión</span>
                </button>
            </div>
        </div>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Dashboard -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2>Panel de Control</h2>
                    <div class="date-display">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="current-date"></span>
                    </div>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card total-value">
                        <div class="stat-icon">
                            <i class="fas fa-euro-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Valor Total</h3>
                            <p id="total-value">€4,850.60</p>
                            <span class="stat-trend positive">+2.5%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card product-count">
                        <div class="stat-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Productos</h3>
                            <p id="product-count">42</p>
                            <span class="stat-trend negative">3 a reponer</span>
                        </div>
                    </div>
                    
                    <div class="stat-card rotation-rate">
                        <div class="stat-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Rotación</h3>
                            <p id="rotation-rate">1.8</p>
                            <span class="stat-trend positive">+0.3</span>
                        </div>
                    </div>
                    
                    <div class="stat-card alerts">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Alertas</h3>
                            <p id="alert-count">5</p>
                            <span class="stat-trend negative">Requieren atención</span>
                        </div>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Demanda Mensual</h3>
                            <div class="chart-actions">
                                <button data-period="month">Mensual</button>
                                <button class="active" data-period="quarter">Trimestral</button>
                                <button data-period="year">Anual</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="demand-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Productos Críticos</h3>
                        </div>
                        <div class="critical-products" id="critical-products">
                            <!-- Los productos críticos se cargarán dinámicamente -->
                        </div>
                    </div>
                </div>
                
                <div class="activity-container">
                    <div class="section-header">
                        <h3>Actividad Reciente</h3>
                        <button class="btn-primary" id="view-all-activity">Ver todo</button>
                    </div>
                    
                    <table class="activity-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Tipo</th>
                                <th>Cantidad</th>
                                <th>Fecha</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="recent-activity">
                            <!-- La actividad se cargará dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Inventario -->
            <section id="inventario" class="content-section">
                <div class="section-header">
                    <h2>Gestión de Inventario</h2>
                    <div>
                        <button class="btn-primary" id="add-product">
                            <i class="fas fa-plus-circle"></i> Nuevo Producto
                        </button>
                        <button class="btn-secondary" id="import-pdf">
                            <i class="fas fa-file-alt"></i> Importar Archivo
                        </button>
                        <button class="btn-secondary" id="export-data">
                            <i class="fas fa-file-export"></i> Exportar
                        </button>
                    </div>
                </div>
                
                <!-- Área para arrastrar y soltar PDF o TXT -->
                <div class="upload-area" id="pdf-drop-zone">
                    <i class="fas fa-file-alt fa-3x"></i>
                    <h3>Arrastra tu PDF o TXT de LKBitronics aquí</h3>
                    <p>o haz clic para seleccionar archivo</p>
                    <div class="file-types">
                        <span class="file-type">PDF</span>
                        <span class="file-type">TXT</span>
                    </div>
                    <input type="file" id="pdf-upload" accept=".pdf,.txt" style="display: none;">
                    <div class="processing" id="processing" style="display: none;">
                        <div class="spinner"></div>
                        <p>Procesando archivo...</p>
                    </div>
                </div>
                
                <div class="inventory-controls">
                    <div class="search-container">
                        <input type="text" placeholder="Buscar producto..." id="search-product">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <div class="filters">
                        <button class="filter-btn active" data-filter="all">Todos</button>
                        <button class="filter-btn" data-filter="critical">Críticos</button>
                        <button class="filter-btn" data-filter="warning">Advertencia</button>
                        <button class="filter-btn" data-filter="ok">OK</button>
                    </div>
                </div>
                
                <div class="inventory-table-container">
                    <table class="inventory-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Stock Actual</th>
                                <th>Stock Mín</th>
                                <th>Stock Máx</th>
                                <th>Estado</th>
                                <th>Reposición</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Movimientos -->
            <section id="movimientos" class="content-section">
                <div class="section-header">
                    <h2>Registro de Movimientos</h2>
                </div>
                <div class="upload-area">
                    <i class="fas fa-exchange-alt fa-3x"></i>
                    <h3>Importar movimientos desde LKBitronics</h3>
                    <p>Próximamente en la versión 2.0</p>
                </div>
            </section>
            
            <!-- Predicciones -->
            <section id="predicciones" class="content-section">
                <div class="section-header">
                    <h2>Predicciones de Stock Avanzadas</h2>
                    <div class="prediction-controls">
                        <label>
                            Horizonte: 
                            <select id="horizon">
                                <option value="1">1 mes</option>
                                <option value="2">2 meses</option>
                                <option value="3" selected>3 meses</option>
                            </select>
                        </label>
                        <button class="btn-primary" id="apply-forecast">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Análisis Predictivo Holt-Winters</h3>
                        <span class="confidence high">Precisión: 92%</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="prediction-chart"></canvas>
                    </div>
                </div>
                
                <div class="prediction-info">
                    <div class="prediction-metric">
                        <div class="metric-label">Tasa de Rotación</div>
                        <div class="metric-value">1.85</div>
                        <div class="metric-label">Impacto en predicción</div>
                        <div class="confidence high">Alta rotación</div>
                    </div>
                    
                    <div class="prediction-metric">
                        <div class="metric-label">Estacionalidad</div>
                        <div class="metric-value">+15%</div>
                        <div class="metric-label">Próximo mes</div>
                        <div class="confidence medium">Estacionalidad media</div>
                    </div>
                    
                    <div class="prediction-metric">
                        <div class="metric-label">Error promedio</div>
                        <div class="metric-value">±6.2%</div>
                        <div class="metric-label">Confianza</div>
                        <div class="confidence high">Alta confianza</div>
                    </div>
                </div>
                
                <div class="section-header">
                    <h3>Recomendaciones de Stock</h3>
                </div>
                
                <div class="prediction-card">
                    <div class="prediction-header">
                        <div class="product-name">Marlboro Rojo</div>
                        <div class="confidence medium">Precisión 85%</div>
                    </div>
                    <p>Stock actual: 45 unidades</p>
                    <div class="prediction-chart">
                        <canvas id="product-chart-1"></canvas>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-level" style="width: 85%; background-color: #f39c12;"></div>
                    </div>
                    <p class="replenish">Recomendación: Pedir 65 unidades para el próximo mes</p>
                </div>
                
                <div class="prediction-card">
                    <div class="prediction-header">
                        <div class="product-name">Lotería Nacional</div>
                        <div class="confidence high">Precisión 92%</div>
                    </div>
                    <p>Stock actual: 85 unidades</p>
                    <div class="prediction-chart">
                        <canvas id="product-chart-2"></canvas>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-level" style="width: 92%; background-color: #2ecc71;"></div>
                    </div>
                    <p class="replenish">Recomendación: Mantener stock actual</p>
                </div>
            </section>
            
            <!-- Pedidos -->
            <section id="pedidos" class="content-section">
                <div class="section-header">
                    <h2>Gestión de Pedidos</h2>
                    <button class="btn-primary" id="new-order">
                        <i class="fas fa-plus-circle"></i> Nuevo Pedido
                    </button>
                </div>
                <div class="upload-area">
                    <i class="fas fa-truck fa-3x"></i>
                    <h3>Recomendaciones de Pedido</h3>
                    <p>Basado en el análisis de stock actual</p>
                </div>
            </section>
            
            <!-- Configuración -->
            <section id="config" class="content-section">
                <div class="section-header">
                    <h2>Configuración del Sistema</h2>
                </div>
                <div class="chart-card">
                    <h3>Integración con LKBitronics</h3>
                    <div class="form-group">
                        <label for="sync-frequency">Frecuencia de sincronización</label>
                        <select id="sync-frequency">
                            <option value="diaria">Diaria</option>
                            <option value="semanal">Semanal</option>
                            <option value="mensual">Mensual</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="min-stock-default">Stock Mínimo por Defecto</label>
                        <input type="number" id="min-stock-default" placeholder="Stock mínimo" value="20">
                        <p id="help-text">Se aplicará a nuevos productos</p>
                    </div>
                    <button class="btn-primary" id="save-settings">Guardar Configuración</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para añadir/editar producto -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Añadir Producto</h3>
                <button class="close-modal" id="close-modal-btn">×</button>
            </div>
            <div class="modal-body">
                <form id="product-form">
                    <input type="hidden" id="product-id">
                    <div class="form-group">
                        <label for="product-name">Nombre del Producto</label>
                        <input type="text" id="product-name" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="current-stock">Stock Actual</label>
                            <input type="number" id="current-stock" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="min-stock">Stock Mínimo</label>
                            <input type="number" id="min-stock" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="max-stock">Stock Máximo</label>
                            <input type="number" id="max-stock" min="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="category">Categoría</label>
                        <select id="category">
                            <option value="tabaco">Tabaco</option>
                            <option value="lotería">Lotería</option>
                            <option value="bebidas">Bebidas</option>
                            <option value="snacks">Snacks</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="supplier">Proveedor</label>
                        <input type="text" id="supplier">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-btn">Cancelar</button>
                        <button type="submit" class="btn-primary">Guardar Producto</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
